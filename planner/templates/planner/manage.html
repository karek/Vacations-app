{% extends "planner/index.html" %}

{# we assume this template is run from the correct manage url (/manage-absences or /my-absences) #}

{% block selected_absence_panel %}
        <h2 id="right-panel-header">Absence Manager</h2>
        <form id='plan-absence' method='GET' action="{{ request.path }}">
            {% if accept_absence %}
            <input type="hidden" name="absence-id" value="{{ accept_absence.id }}"/>
            {% endif %}
            {% include 'planner/planning_controls.html' %}
        </form>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script type="text/javascript">
    global_manage_mode = "{{ manage_mode }}";
    global_manage_url = "{{ request.path }}";
    {% if accept_absence %}
        {% autoescape off %}
        global_accept_absence_id = {{ accept_absence.id }};
        {% endautoescape %}
    {% endif %}
</script>
{% endblock %}

{% block calendarDeclaration %}
{{ block.super }}
{% if accept_absence %}
<script type="text/javascript">
    $(document).ready(function() {
        {% autoescape off %}
        select_ranges_from_json({{ accept_ranges }});
        {% endautoescape %}
    });
</script>
{% endif %}
{% endblock %}
